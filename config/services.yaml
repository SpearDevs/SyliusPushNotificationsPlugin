imports:
    - { resource: "../vendor/bentools/webpush-bundle/src/Resources/config/services.xml" }

services:
    _defaults:
        autowire: true
        autoconfigure: true
    
    SpearDevs\SyliusPushNotificationsPlugin\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'
            
    SpearDevs\SyliusPushNotificationsPlugin\Manager\UserSubscriptionManager:
        class: SpearDevs\SyliusPushNotificationsPlugin\Manager\UserSubscriptionManager
        arguments:
            - '@app.repository.user_subscription'
        tags:
            - { name: bentools_webpush.subscription_manager, user_class: 'Sylius\Component\Core\Model\ShopUser' }
    
    app.listener.shop.menu_builder:
        class: SpearDevs\SyliusPushNotificationsPlugin\Menu\Shop\AccountMenuListener
        tags:
            - { name: kernel.event_listener, event: sylius.menu.shop.account, method: addAccountMenuItems }

    app.listener.admin.menu_builder:
        class: SpearDevs\SyliusPushNotificationsPlugin\Menu\Admin\AdminMenuListener
        tags:
            - { name: kernel.event_listener, event: sylius.menu.admin.main, method: addAdminMenuItems }
